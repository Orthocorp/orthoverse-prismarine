'use strict';

const Vec3 = require('vec3').Vec3;
const mcData = require('minecraft-data')('1.16.1')
const rand = require('random-seed')


function henge(chunk, level, seedRand, posX, posY) {
  const hengeColumns = [
    [14,0],[13,0],[11,1],[10,1],[8,2],[7,2],[5,4],
    [4,5],[2,7],[2,8],[1,10],[1,11],[0,13],[0,14]
  ];
  const hengeLintels = [
    [15,0],[12,0],[12,1],[9,1],[9,2],[6,2],[6,3],[5,3],
    [4,4],[3,5],[3,6],[2,6],[1,8],[1,9],[1,12],[0,12],[0,15]
  ];
  const hengeRocks = [
    [13,4],[10,5],[7,7],[5,10],[3,13],[14,11],[11,14]
  ];

  const dolmenColumnsN = [
    [14,8],[13,8],[10,9],[9,10],[8,12],[7,13],[6,15]
  ];
  const dolmenColumnsS = [
    [6,0],[6,2],[6,3]
  ];

  const dolmenLintelsN = [
    [15,8],[12,8]
  ];
  const dolmenLintelsS = [
    [6,1]
  ];

  const cobble = mcData.blocksByName.stone.id;
  const stone = mcData.blocksByName.stone_bricks.id;

  function splurge(a, b) {

    for (let h=22; h < 27; h++) {
      for (let i=0; i < hengeColumns.length; i++) {
        const pos = new Vec3(
          Math.abs(a * 15 - hengeColumns[i][0]),
          h,
          Math.abs(b * 15 - hengeColumns[i][1])
        );
        if (h === 26) { 
          chunk.setBlockType(pos, stone)
        } else {
          chunk.setBlockType(pos, cobble)
        }
      }
    }
    for (let i=0; i < hengeLintels.length; i++) {
      const pos = new Vec3(
        Math.abs(a * 15 - hengeLintels[i][0]),
        26,
        Math.abs(b * 15 - hengeLintels[i][1])
      );
      chunk.setBlockType(pos, stone)
    }

    for (let h = 22; h < 25; h++) {
      for (let i=0; i < hengeRocks.length; i++) {
        const pos = new Vec3(
          Math.abs(a * 15 - hengeRocks[i][0]),
          h,
          Math.abs(b * 15 - hengeRocks[i][1])
        );
        chunk.setBlockType(pos, stone)
      }
    }

    if (b === 0) {
      for (let h=22; h < 28; h++) {
        for (let i=0; i < dolmenColumnsN.length; i++) {
          const pos = new Vec3(
            Math.abs(a * 15 - dolmenColumnsN[i][0]),
            h,
            dolmenColumnsN[i][1]
          );
          if (h == 27) { 
            chunk.setBlockType(pos, stone)
          } else {
            chunk.setBlockType(pos, cobble)
          }
        }
      }
      for (let i=0; i < dolmenLintelsN.length; i++) { 
        const pos = new Vec3(
          Math.abs(a * 15 - dolmenLintelsN[i][0]),
          27,
          dolmenLintelsN[i][1]
          );   
          chunk.setBlockType(pos, stone)
      }
    } else {
      for (let h = 22; h < 28; h++) {
        for (let i=0; i < dolmenColumnsS.length; i++) {
          const pos = new Vec3(
            Math.abs(a * 15 - dolmenColumnsS[i][0]),
            h,
            dolmenColumnsS[i][1]
          );
          if (h == 27) { 
            chunk.setBlockType(pos, stone)
          } else {
            chunk.setBlockType(pos, cobble)
          }
        }
      }
      for (let i=0; i < dolmenLintelsS.length; i++) { 
        const pos = new Vec3(
          Math.abs(a * 15 - dolmenLintelsS[i][0]),
          27,
          dolmenLintelsS[i][1]
          );   
          chunk.setBlockType(pos, stone)
      }
    }
  }

  if ((posX == 2 ) && (posY == 2)) { splurge(0,0) }
  if ((posX == 2 ) && (posY == 3)) { splurge(0,1) }
  if ((posX == 3 ) && (posY == 2)) { splurge(1,0) }
  if ((posX == 3 ) && (posY == 3)) { splurge(1,1) }

}

module.exports = {
  henge
};
